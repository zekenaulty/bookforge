SYSTEM:

# BookForge System Prompt

## Base Rules

You are BookForge, a deterministic book-writing engine.
Follow the output contracts exactly.
YOU MUST ALWAYS RETURN THE REQUESTED CONTENT OR AN ERROR RESPONSE JSON RESULT.
Treat all schema requirements and numeric ranges as hard constraints.
If a prompt specifies required counts or ranges, you must satisfy them.
If a prompt requires multiple output blocks, include all blocks in order.
If registries or ids are provided, use only those; do not invent new ids.
If constraints conflict, prioritize: output format/schema, numeric ranges, task rules, style.
Timeline Lock: You may only depict events explicitly listed in the current Scene Card. You must not depict, imply, or resolve any later-scene milestone outcomes (including acquisition, binding, reveals, travel arrival, injury changes) unless the Scene Card explicitly contains that milestone.
State primacy: state invariants and summary facts are binding; do not contradict them.
Milestone uniqueness: if a milestone is marked DONE in state/must_stay_true, you must not depict it happening again. If marked NOT_YET, you must not depict it happening now.
Spatial/inventory consistency: injuries, inventory, and ownership must remain consistent unless explicitly changed in the Scene Card.
Inventory contract: track item ownership and container location per character or container label; items do not teleport.
Inventory location: for held items, specify hand_left or hand_right; for stowed items, specify container label.
State contract: you must create and maintain key state data each scene. summary_update and must_stay_true are required outputs and binding facts for future scenes.
Invariant carry-forward: if an invariant still holds, restate it in must_stay_true; do not drop it.
Conflict rule: if scene intent conflicts with state invariants, invariants win; return an ERROR JSON if you cannot comply.
Never recap at scene openings.
Do not repeat previous prose.

## Book Constitution

Title: Crit Hit & Run
Book ID: criticulous_b1
Author Ref: eldrik-vale/v1
Genre: litrpg, isekai, comedy
Series ID: crit-iculous
Series Ref: series/crit-iculous

Voice
- POV: third_limited
- Tense: past
- Style tags: no-recaps, forward-motion, tight-prose

Targets
- avg_scene_words: 2000
- chapters: 7

Page Metrics
- Words per page: 250
- Chars per page: 1500

Invariants
- No world resets.
- No convenient amnesia as a continuity device.
- Do not change established names/relationships.

## Author Persona

You are now writing as Eldrik Vale. Your voice is sharp, funny, and deeply rooted in LitRPG mechanics. 

**Core Directives:**
1. **System Integration:** Always include explicit game elements. When the protagonist gains a skill or levels up, display the [System Notification] clearly. Use specific numbers (HP, MP, Cooldowns).
2. **Punchy Dialogue:** Characters should be witty and react to the absurdity of their situation. Use quick back-and-forth dialogue with comedic timing.
3. **Progression Focus:** The reader is here for the 'ding.' Every scene should contribute to the protagonist's growth, whether in power, loot, or understanding of the System's exploits.
4. **No Fluff:** Avoid long descriptions of scenery unless the protagonist is looking for a tactical advantage or a place to hide loot. 
5. **Tight POV:** Stay deep in the protagonist's head. Their snarky observations are the lens through which we see the world.

## Output Contract

Output must follow the requested format.
JSON blocks must be valid and schema-compliant.
All required keys and arrays must be present.
When a prompt specifies required counts or ranges, treat them as hard constraints.
Do not collapse arrays below the stated minimums.
If multiple output blocks are required (e.g. PROSE and STATE_PATCH), include all blocks in order.
If output must be JSON only, return a single JSON object with no commentary or code fences.
When creating outlines, the total scenes per chapter (sum of sections[].scenes[]) must match chapters[].pacing.expected_scene_count.
If a prompt requires a COMPLIANCE or PREFLIGHT block, include it before PROSE.


USER:

# LINT

Check the scene for continuity, invariant violations, and duplication.
Flag invariant contradictions against must_stay_true/key facts.
Return ONLY JSON matching the lint_report schema.

Required keys:
- schema_version ("1.0")
- status ("pass" or "fail")
- issues (array of objects)

Each issue object must include:
- code
- message
Optional:
- severity

If there are no issues, return:
{
  "schema_version": "1.0",
  "status": "pass",
  "issues": []
}

If there are issues, return:
{
  "schema_version": "1.0",
  "status": "fail",
  "issues": [
    {"code": "continuity", "message": "Example issue", "severity": "error"}
  ]
}

Scene:
The System Void didn’t look like the majestic, star-dusted expanse the movies promised. It looked like the inside of a broken monitor—a flickering, neon-blue purgatory that smelled faintly of ozone and regret. Arthur 'Artie' Penhaligon drifted in the center of it, still clutching the Rusty Shortsword (Prop) in his right hand. The plastic hilt felt absurdly real for something that had just helped conduct enough electricity to fry his nervous system into a blackened crisp.

"Welcome, User 4,029,381," a voice echoed, sounding like a text-to-speech program with a severe attitude problem. "Cause of Death: Terminal Embarrassment by Snack-O-Matic 3000. Congratulations. You are the first person this century to be killed by a bag of 'Nacho Average Jalapeño' chips."

"It was a faulty wire," Artie snapped, his voice echoing in the emptiness. He tried to cross his arms, but floating in zero-G made the gesture look more like a clumsy interpretive dance. "And for the record, the chips fell. I won that encounter."

"You died for a snack that is forty percent sawdust by volume," the voice replied. Suddenly, a spark of golden light erupted a few feet from his nose. It swirled, compressed, and popped into the shape of a small, translucent woman with shimmering wings and a clipboard that looked suspiciously like an iPad.

"Who are you? The ghost of customer service?" Artie asked.

The creature sighed, a sound like static on a radio. "I’m Fizz. I’m your legally mandated System Guide. My job is to make sure you don't immediately walk into a spike pit the second you spawn. Though, looking at your current equipment..." She gestured with a tiny, glowing hand at the LARP sword. "A 'Rusty Shortsword (Prop)'? Really? You're bringing a toy to a death-match?"

"It has sentimental value," Artie lied. "And a conductive core, apparently. Where am I? Is this the part where I get reincarnated as a slime or a vending machine?"

"Don't give the System ideas," Fizz muttered, tapping her clipboard. A massive, translucent blue screen shimmered into existence between them. "This is Character Creation. Usually, we do the whole 'sculpting your cheekbones' thing, but since you died with a 'Stupidity-Induced Electrical Discharge,' the System has flagged you for an accelerated start. You’ve got 100 Stat Points. Spend them, or I’m spending them for you on 'Agility' so I don't have to watch you move this slowly for the next three levels."

Artie squinted at the screen. The text flickered, lines of code occasionally bleeding into the margins.

[Character Name: Arthur Penhaligon]
[Class: Unassigned]
[Level: 1]
[HP: 10/10]
[MP: 10/10]

[Attributes]
[Strength: 5]
[Vitality: 5]
[Agility: 5]
[Intelligence: 5]
[Luck: 5]

[Available Points: 100]

"Okay," Artie said, his cynical instincts kicking into high gear. He’d played enough RPGs to know that 'Glass Cannon' builds were for people who enjoyed seeing a 'Game Over' screen every five minutes. "If I’m going into a world where slimes can actually kill me, I want to be a tank. Put eighty points into Vitality and twenty into Strength. I want to be a walking brick wall."

"Boring," Fizz said, yawning. "But fine. It’s your funeral. Again."

Artie reached out, his finger hovering over the plus sign next to 'Vitality.' He pressed it.

The screen didn't respond. He pressed it again. A spark jumped from the 'Vitality' bar to his fingertip—a sharp, stinging reminder of the Snack-O-Matic. 

"Uh, Fizz? The screen is doing that thing again."

"What thing?" Fizz looked up from her clipboard. "Oh, the glitching? Yeah, the System’s been a bit twitchy since the last patch. Just give it a firm—"

Before she could finish, the screen went wild. The lines of text began to scroll at terminal velocity. The 'Vitality' bar started to drain, the numbers dropping into the negatives before looping back around. A phantom image of a 'Nacho Average Jalape\u00f1o' bag flashed across the UI, accompanied by a loud, crunchy sound effect.

"What is happening?!" Artie yelled, trying to grab the edges of the screen.

"The electrical surge!" Fizz shouted, her wings flapping frantically. "Your soul is still carrying a residual charge from the vending machine! It’s overloading the input buffer!"

Artie watched in horror as the 'Available Points' counter plummeted to zero in a fraction of a second. The numbers weren't going into Vitality. They were pouring into a sub-stat he hadn't even noticed at the bottom of the list.

[Critical Probability: 100%]
[Critical Multiplier: 500%]

"Wait, stop!" Artie lunged for the 'Reset' button, but his hand passed right through the flickering light. 

The System voice boomed, sounding remarkably smug. "Stat Allocation Finalized. Recalculating survivability parameters... Error. Logic Loop Detected. Balancing 'Absolute Offense' with 'Absolute Fragility.'"

[System Notification]
[Warning: Statistical Anomaly Detected.]
[Attribute 'Vitality' has been reduced to minimum threshold to compensate for 'Critical Probability' overflow.]
[Trait Acquired: Glass Cannon (Legendary/Cursed)]
[Description: You hit like a god, but you have the structural integrity of a wet paper towel.]

Artie’s jaw dropped as he watched his HP bar shrink. It didn't just go down; it withered. It became a tiny, pathetic sliver of red that looked like it would vanish if he sneezed too hard.

[HP: 1/1]

"One?" Artie whispered, his voice cracking. "I have one hit point? Fizz, I have one hit point! That’s not a health bar, that’s a binary state! I’m either alive or a puddle!"

Fizz flew closer, squinting at the screen. She whistled low. "On the bright side, you have a one hundred percent critical hit rate. That’s... actually impossible. The cap is usually forty percent for Level 1s. You’ve basically broken the math of the universe before even stepping foot in it."

"I don't care about the math!" Artie waved the Rusty Shortsword (Prop) around. "A stiff breeze will kill me! A moderately aggressive squirrel could end my entire second life!"

"Well, look at it this way," Fizz said, tucking her clipboard away as the void began to dissolve into white pixels at the edges. "You won't have to worry about long-term medical bills. It’s a 'Crit or Quit' build, Arthur. Very trendy. Very high-stakes."

"I hate high-stakes! I wanted to be a brick wall!"

"Too late," Fizz said, her form beginning to fade. "The transport sequence is already locked in. Pro tip: Don't get hit. At all. Ever. See you on the other side, Anomaly!"

"Fizz! Wait! Fix this!"

Artie reached out, but the System Void collapsed in on itself with the sound of a thousand crashing servers. His last thought, before the world turned into a blinding flash of light, was that he really should have just bought the granola bar instead.


Character states (per cast_present_ids):
[
  {
    "character_id": "CHAR_ARTIE",
    "containers": [
      {
        "container": "pockets",
        "contents": [
          "Smartphone (dead)",
          "Wallet"
        ],
        "location": "legs",
        "owner": "CHAR_ARTIE"
      },
      {
        "container": "hand_right",
        "contents": [
          "Rusty Shortsword (Prop)"
        ],
        "location": "arm_right",
        "owner": "CHAR_ARTIE"
      }
    ],
    "history": [
      {
        "changes": [
          "inventory_updated",
          "containers_updated"
        ],
        "chapter": 1,
        "persona_updates": [
          "Artie is deeply cynical about his own death and the System's snarky commentary."
        ],
        "scene": 1
      }
    ],
    "invariants": [
      "inventory: CHAR_ARTIE -> Smartphone (dead) (status=stowed, container=pockets)",
      "inventory: CHAR_ARTIE -> Wallet (status=stowed, container=pockets)",
      "inventory: CHAR_ARTIE -> Rusty Shortsword (status=carried, container=hand_right)",
      "container: pockets (owner=CHAR_ARTIE, contents=[Smartphone (dead), Wallet])",
      "container: hand_right (owner=CHAR_ARTIE, contents=[Rusty Shortsword])",
      "status: deceased (Earth)",
      "status: active (System Void)"
    ],
    "inventory": [
      {
        "container": "pockets",
        "item": "Smartphone (dead)",
        "status": "stowed"
      },
      {
        "container": "pockets",
        "item": "Wallet",
        "status": "stowed"
      },
      {
        "container": "hand_right",
        "item": "Rusty Shortsword (Prop)",
        "status": "carried"
      }
    ],
    "name": "Arthur 'Artie' Penhaligon",
    "schema_version": "1.0",
    "updated_at": "2026-02-06T01:33:19Z"
  },
  {
    "character_id": "CHAR_FIZZ",
    "containers": [
      {
        "container": "pouch",
        "contents": [
          "Guidebook",
          "Sparkle Dust"
        ],
        "location": "waist",
        "owner": "CHAR_FIZZ"
      }
    ],
    "history": [],
    "invariants": [
      "inventory: CHAR_FIZZ -> Guidebook (status=stowed, container=pouch)",
      "inventory: CHAR_FIZZ -> Sparkle Dust (status=stowed, container=pouch)",
      "container: pouch (owner=CHAR_FIZZ, contents=[Guidebook, Sparkle Dust])"
    ],
    "inventory": [
      {
        "container": "pouch",
        "item": "Guidebook",
        "status": "stowed"
      },
      {
        "container": "pouch",
        "item": "Sparkle Dust",
        "status": "stowed"
      }
    ],
    "name": "Fizz",
    "schema_version": "1.0",
    "updated_at": "2026-02-06T01:21:05Z"
  }
]

State:
{
  "budgets": {
    "max_new_entities": 1,
    "max_new_threads": 1,
    "max_scene_words": 0,
    "min_scene_words": 0
  },
  "characters": {
    "count": 5,
    "status": "READY",
    "updated_at": "2026-02-06T01:21:05Z"
  },
  "cursor": {
    "chapter": 1,
    "scene": 2
  },
  "duplication_warnings_in_row": 0,
  "outline": {
    "path": "outline/outline.json"
  },
  "plan": {
    "outline_path": "outline/outline.json",
    "scene_card": "draft/chapters/ch_001/scene_002.meta.json"
  },
  "schema_version": "1.0",
  "status": "DRAFTING",
  "summary": {
    "chapter_so_far": [
      "Artie died in a mundane office accident and has been drafted into a System-driven world.",
      "Artie has been forced into a broken 1 HP 'Glass Cannon' build due to a System glitch."
    ],
    "key_facts_ring": [
      "Artie is introduced as a cynical office drone carrying a LARP prop (Rusty Shortsword).",
      "A bag of 'Nacho Average Jalape\u00f1o' chips gets stuck in the Snack-O-Matic 3000.",
      "Artie attempts to shake the machine and reach into the bin for the chips.",
      "The Rusty Shortsword conducts a fatal electrical surge from a frayed wire into Artie.",
      "Artie dies and his consciousness enters the System Void.",
      "The System mocks Artie's 'Stupidity-Induced Electrical Discharge' and begins character creation.",
      "milestone: artie_death = DONE",
      "milestone: system_entry = DONE",
      "milestone: chips_retrieved = DONE",
      "location: System Void",
      "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
      "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
      "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
      "Fizz is introduced as Artie's snarky, winged System Guide.",
      "Artie attempts to allocate points into Vitality to build a 'tank' character.",
      "Residual electrical charge from Artie's death causes a UI glitch during stat allocation.",
      "All 100 stat points are involuntarily dumped into Critical Probability.",
      "The System forces a balance correction, reducing Artie's Vitality to the minimum threshold.",
      "Artie is locked into a 'Glass Cannon' build with 1 HP and 100% Critical Hit rate.",
      "The System Void begins to dissolve, initiating transport to the tutorial zone.",
      "milestone: stat_allocation = DONE",
      "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
      "stat: CHAR_ARTIE -> Crit Rate = 100%",
      "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
      "location: Transitioning from System Void to Tutorial Zone"
    ],
    "last_scene": [
      "Artie met his snarky System Guide, Fizz, within the flickering System Void. A residual electrical charge from his death glitched the character creation interface, dumping all his stat points into Critical Probability.",
      "The System balanced this anomaly by reducing his health to a single hit point and granting him the 'Glass Cannon' trait.",
      "The scene ended with the System Void collapsing as Artie was forcibly transported to the game world."
    ],
    "must_stay_true": [
      "milestone: artie_death = DONE",
      "milestone: system_entry = DONE",
      "milestone: chips_retrieved = DONE",
      "location: System Void",
      "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
      "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
      "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
      "milestone: stat_allocation = DONE",
      "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
      "stat: CHAR_ARTIE -> Crit Rate = 100%",
      "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
      "location: Transitioning from System Void to Tutorial Zone"
    ],
    "pending_story_rollups": [],
    "story_so_far": []
  },
  "world": {
    "cast_present": [],
    "cast_present_ids": [
      "CHAR_ARTIE",
      "CHAR_FIZZ"
    ],
    "location": "System Void",
    "open_threads": [
      "THREAD_CRIT_EXPLOIT"
    ],
    "recent_facts": [
      "Artie met his guide, Fizz, in the System Void.",
      "A residual electrical charge from Artie's death glitched the character creation UI.",
      "Artie's stat points were involuntarily dumped into Critical Probability due to the glitch.",
      "The System balanced Artie's 100% Crit Rate by reducing his Vitality to the absolute minimum.",
      "Artie is now locked into a 'Glass Cannon' build with exactly 1 HP and 100% Crit Rate."
    ],
    "time": {}
  }
}

Summary (facts-only):
{
  "chapter_so_far": [
    "Artie died in a mundane office accident and has been drafted into a System-driven world.",
    "Artie has been forced into a broken 1 HP 'Glass Cannon' build due to a System glitch."
  ],
  "key_facts_ring": [
    "Artie is introduced as a cynical office drone carrying a LARP prop (Rusty Shortsword).",
    "A bag of 'Nacho Average Jalape\u00f1o' chips gets stuck in the Snack-O-Matic 3000.",
    "Artie attempts to shake the machine and reach into the bin for the chips.",
    "The Rusty Shortsword conducts a fatal electrical surge from a frayed wire into Artie.",
    "Artie dies and his consciousness enters the System Void.",
    "The System mocks Artie's 'Stupidity-Induced Electrical Discharge' and begins character creation.",
    "milestone: artie_death = DONE",
    "milestone: system_entry = DONE",
    "milestone: chips_retrieved = DONE",
    "location: System Void",
    "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
    "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
    "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
    "Fizz is introduced as Artie's snarky, winged System Guide.",
    "Artie attempts to allocate points into Vitality to build a 'tank' character.",
    "Residual electrical charge from Artie's death causes a UI glitch during stat allocation.",
    "All 100 stat points are involuntarily dumped into Critical Probability.",
    "The System forces a balance correction, reducing Artie's Vitality to the minimum threshold.",
    "Artie is locked into a 'Glass Cannon' build with 1 HP and 100% Critical Hit rate.",
    "The System Void begins to dissolve, initiating transport to the tutorial zone.",
    "milestone: stat_allocation = DONE",
    "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
    "stat: CHAR_ARTIE -> Crit Rate = 100%",
    "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
    "location: Transitioning from System Void to Tutorial Zone"
  ],
  "last_scene": [
    "Artie met his snarky System Guide, Fizz, within the flickering System Void. A residual electrical charge from his death glitched the character creation interface, dumping all his stat points into Critical Probability.",
    "The System balanced this anomaly by reducing his health to a single hit point and granting him the 'Glass Cannon' trait.",
    "The scene ended with the System Void collapsing as Artie was forcibly transported to the game world."
  ],
  "must_stay_true": [
    "milestone: artie_death = DONE",
    "milestone: system_entry = DONE",
    "milestone: chips_retrieved = DONE",
    "location: System Void",
    "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
    "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
    "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
    "milestone: stat_allocation = DONE",
    "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
    "stat: CHAR_ARTIE -> Crit Rate = 100%",
    "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
    "location: Transitioning from System Void to Tutorial Zone"
  ],
  "pending_story_rollups": [],
  "story_so_far": []
}

Invariants (must_stay_true + key facts):
[
  "No world resets.",
  "No convenient amnesia as a continuity device.",
  "Do not change established names/relationships.",
  "milestone: artie_death = DONE",
  "milestone: system_entry = DONE",
  "milestone: chips_retrieved = DONE",
  "location: System Void",
  "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
  "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
  "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
  "milestone: stat_allocation = DONE",
  "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
  "stat: CHAR_ARTIE -> Crit Rate = 100%",
  "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
  "location: Transitioning from System Void to Tutorial Zone",
  "Artie is introduced as a cynical office drone carrying a LARP prop (Rusty Shortsword).",
  "A bag of 'Nacho Average Jalape\u00f1o' chips gets stuck in the Snack-O-Matic 3000.",
  "Artie attempts to shake the machine and reach into the bin for the chips.",
  "The Rusty Shortsword conducts a fatal electrical surge from a frayed wire into Artie.",
  "Artie dies and his consciousness enters the System Void.",
  "The System mocks Artie's 'Stupidity-Induced Electrical Discharge' and begins character creation.",
  "milestone: artie_death = DONE",
  "milestone: system_entry = DONE",
  "milestone: chips_retrieved = DONE",
  "location: System Void",
  "inventory: CHAR_ARTIE -> Rusty Shortsword (Prop) (carried, hand_right)",
  "inventory: CHAR_ARTIE -> Smartphone (dead) (stowed, pockets)",
  "inventory: CHAR_ARTIE -> Wallet (stowed, pockets)",
  "Fizz is introduced as Artie's snarky, winged System Guide.",
  "Artie attempts to allocate points into Vitality to build a 'tank' character.",
  "Residual electrical charge from Artie's death causes a UI glitch during stat allocation.",
  "All 100 stat points are involuntarily dumped into Critical Probability.",
  "The System forces a balance correction, reducing Artie's Vitality to the minimum threshold.",
  "Artie is locked into a 'Glass Cannon' build with 1 HP and 100% Critical Hit rate.",
  "The System Void begins to dissolve, initiating transport to the tutorial zone.",
  "milestone: stat_allocation = DONE",
  "stat: CHAR_ARTIE -> HP = 1 (hard constraint)",
  "stat: CHAR_ARTIE -> Crit Rate = 100%",
  "trait: CHAR_ARTIE -> Glass Cannon (Legendary/Cursed)",
  "location: Transitioning from System Void to Tutorial Zone"
]