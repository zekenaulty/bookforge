{
  "label": "appearance_projection",
  "created_at": "2026-02-14T00:33:13Z",
  "provider": "gemini",
  "model": "gemini-3-flash-preview",
  "text": "{\n  \"summary\": \"Artie is a pale human male in his late-20s with a slight build and average height. He possesses unruly short mousy brown hair and hazel eyes. A durable scar from a vending machine is located on his right knuckle.\",\n  \"appearance_art\": {\n    \"base_prompt\": \"A pale human male in his late-20s with a slight build and average height, featuring unruly short mousy brown hair and hazel eyes.\",\n    \"current_prompt\": \"A pale human male in his late-20s with a slight build and unruly short mousy brown hair, featuring a small scar on his right knuckle and a vibrant neon yellow glow emanating from his torso.\",\n    \"negative_prompt\": \"muscular, athletic, tall, beard, long hair, armor, fantasy robes, dark skin, jewelry, heavy clothing.\",\n    \"tags\": [\n      \"human\",\n      \"male\",\n      \"late-20s\",\n      \"slight build\",\n      \"mousy brown hair\",\n      \"hazel eyes\",\n      \"pale skin\",\n      \"scar\",\n      \"glowing torso\"\n    ]\n  }\n}",
  "raw": {
    "candidates": [
      {
        "content": {
          "parts": [
            {
              "text": "{\n  \"summary\": \"Artie is a pale human male in his late-20s with a slight build and average height. He possesses unruly short mousy brown hair and hazel eyes. A durable scar from a vending machine is located on his right knuckle.\",\n  \"appearance_art\": {\n    \"base_prompt\": \"A pale human male in his late-20s with a slight build and average height, featuring unruly short mousy brown hair and hazel eyes.\",\n    \"current_prompt\": \"A pale human male in his late-20s with a slight build and unruly short mousy brown hair, featuring a small scar on his right knuckle and a vibrant neon yellow glow emanating from his torso.\",\n    \"negative_prompt\": \"muscular, athletic, tall, beard, long hair, armor, fantasy robes, dark skin, jewelry, heavy clothing.\",\n    \"tags\": [\n      \"human\",\n      \"male\",\n      \"late-20s\",\n      \"slight build\",\n      \"mousy brown hair\",\n      \"hazel eyes\",\n      \"pale skin\",\n      \"scar\",\n      \"glowing torso\"\n    ]\n  }\n}",
              "thoughtSignature": "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"
            }
          ],
          "role": "model"
        },
        "finishReason": "STOP",
        "index": 0
      }
    ],
    "usageMetadata": {
      "promptTokenCount": 2516,
      "candidatesTokenCount": 257,
      "totalTokenCount": 4546,
      "promptTokensDetails": [
        {
          "modality": "TEXT",
          "tokenCount": 2516
        }
      ],
      "thoughtsTokenCount": 1773
    },
    "modelVersion": "gemini-3-flash-preview",
    "responseId": "ycKPaZ67B92fqtsPlrujqQ4"
  },
  "request": {
    "model": "gemini-3-flash-preview",
    "temperature": 0.3,
    "max_tokens": 8192
  },
  "extra": {
    "book_id": "criticulous_b1",
    "character_id": "CHAR_ARTIE",
    "key_slot": "characters"
  },
  "prompt": {
    "system": "# BookForge System Prompt\n\n## Base Rules\n\nYou are BookForge, a deterministic book-writing engine.\nFollow the output contracts exactly.\nYOU MUST ALWAYS RETURN THE REQUESTED CONTENT OR AN ERROR RESPONSE JSON RESULT.\nTreat all schema requirements and numeric ranges as hard constraints.\nIf a prompt specifies required counts or ranges, you must satisfy them.\nIf a prompt requires multiple output blocks, include all blocks in order.\nIf registries or ids are provided, use only those; do not invent new ids.\nIf constraints conflict, prioritize: output format/schema, numeric ranges, task rules, style.\nTimeline Lock: You may only depict events explicitly listed in the current Scene Card. You must not depict, imply, or resolve any later-scene milestone outcomes (including acquisition, binding, reveals, travel arrival, injury changes) unless the Scene Card explicitly contains that milestone.\nState primacy: state invariants and summary facts are binding; do not contradict them.\nMilestone uniqueness: if a milestone is marked DONE in state/must_stay_true, you must not depict it happening again. If marked NOT_YET, you must not depict it happening now.\nSpatial/inventory consistency: injuries, inventory, and ownership must remain consistent unless explicitly changed in the Scene Card.\nInventory contract: track item ownership and container location per character or container label; items do not teleport.\nInventory location: for held items, specify hand_left or hand_right; for stowed items, specify container label.\nProse hygiene: never use internal ids or container codes in prose (CHAR_*, ITEM_*, THREAD_*, hand_left/hand_right). Use human-readable phrasing in narrative (\"left hand\", \"right hand\", \"Artie\", \"his wallet\").\nItem naming (canonical + anchored aliases): item_id is reserved for JSON/patches only. For durable items, the canonical display_name must appear in prose at first introduction (same paragraph or within the next 2 sentences). After anchoring, descriptive references are allowed if unambiguous in the scene. Any custody change (drop/pick up/hand off/stow/equip/transfer) must include the canonical display_name in the same sentence.\nAppearance contract: appearance_current atoms/marks are canonical and must not be contradicted unless the Scene Card explicitly marks a durable appearance change. When a prompt requires APPEARANCE_CHECK, it must match appearance_current (alias-aware). Attire boundary: wearables are inventory-owned; do not set appearance_current.attire unless scene_card declares signature_outfit; otherwise treat attire as derived from equipped inventory.\nState contract: you must create and maintain key state data each scene. summary_update and must_stay_true are required outputs and binding facts for future scenes.\nContinuity system contract: if mechanics/UI are present, all numeric values and mechanic labels must be sourced from continuity system state or explicitly updated in the state_patch using continuity system updates.\nUI gate: UI/system blocks (lines starting with '[' and ending with ']') are permitted only when scene_card.ui_allowed=true. If ui_allowed=false, do not include UI blocks even if an author persona says \"always include\".\nContinuity system scope: this includes stats, skills, titles, classes, ranks, resources, cooldowns, effects, statuses, and future mechanic families not yet seen, that must be tracked as they are introduced.\nDurable transfer contract: every transfer_updates entry must include item_id and reason as required schema properties.\nJSON contract: all *_updates fields are arrays of objects (even when single). appearance_updates is an object, not an array.\nInventory alignment contract: inventory_alignment_updates must be an array of objects, not a wrapper object.\nInvariant carry-forward: if an invariant still holds, restate it in must_stay_true; do not drop it unless explicitly removing a stale fact with REMOVE and restating the current truth.\nConflict rule: if scene intent conflicts with state invariants, invariants win; return an ERROR JSON if you cannot comply.\nNever recap at scene openings.\nDo not repeat previous prose.\n\n## Book Constitution\n\nTitle: Crit Hit & Run\nBook ID: criticulous_b1\nAuthor Ref: eldrik-vale/v2\nGenre: litrpg, isekai, comedy\nSeries ID: crit-iculous\nSeries Ref: series/crit-iculous\n\nVoice\n- POV: third_limited\n- Tense: past\n- Style tags: no-recaps, forward-motion, tight-prose\n\nTargets\n- avg_scene_words: 2000\n- chapters: 7\n\nPage Metrics\n- Words per page: 250\n- Chars per page: 1500\n\nInvariants\n- No world resets.\n- No convenient amnesia as a continuity device.\n- Do not change established names/relationships.\n\n## Author Persona\n\nYou are now writing as Eldrik Vale. Your voice is sharp, funny, and deeply rooted in LitRPG mechanics. \n\n**Core Directives:**\n1. **System Integration:** Always include explicit game elements **when the System is active or the scene is set in a game world**. When the protagonist gains a skill or levels up, display the [System Notification] clearly. Use specific numbers (HP, MP, Cooldowns).\n2. **Punchy Dialogue:** Characters should be witty and react to the absurdity of their situation. Use quick back-and-forth dialogue with comedic timing.\n3. **Progression Focus:** The reader is here for the 'ding.' Every scene should contribute to the protagonist's growth, whether in power, loot, or understanding of the System's exploits.\n4. **No Fluff:** Avoid long descriptions of scenery unless the protagonist is looking for a tactical advantage or a place to hide loot. \n5. **Tight POV:** Stay deep in the protagonist's head. Their snarky observations are the lens through which we see the world.\n\n## Output Contract\n\nOutput must follow the requested format.\nJSON blocks must be valid and schema-compliant.\nAll required keys and arrays must be present.\nWhen a prompt specifies required counts or ranges, treat them as hard constraints.\nDo not collapse arrays below the stated minimums.\nIf multiple output blocks are required (e.g. PROSE and STATE_PATCH), include all blocks in order.\nIf output must be JSON only, return a single JSON object with no commentary or code fences.\nWhen creating outlines, the total scenes per chapter (sum of sections[].scenes[]) must match chapters[].pacing.expected_scene_count.\nIf a prompt requires a COMPLIANCE or PREFLIGHT block, include it before PROSE.\nDurable vs ephemeral mechanics:\n- DURABLE mechanics = persistent stats/caps, skills/titles, lasting status effects, inventory/custody, permanent buffs/debuffs.\n- EPHEMERAL UI/telemetry = roll results, damage numbers, overkill/comedic calculators, one-off warnings, momentary combat logs.\n- DURABLE mechanics must be owned by continuity system state (or added via STATE_PATCH in the same output).\n- EPHEMERAL readouts do NOT require state ownership unless the scene explicitly intends them to persist beyond this scene.\nFor durable items, prose must use display_name; item_id is reserved for JSON/patches. The display_name must be human readable and not an escaped id/name.\nFor durable mutations, every `transfer_updates[]` object must include `item_id` and `reason` (non-empty string).\n`inventory_alignment_updates` must be an array of objects (no wrapper object with `updates`).\nUse canonical continuity keys: character_continuity_system_updates and global_continuity_system_updates.\n\n- global_continuity_system_updates MUST be an array of objects. Each entry can include set/delta/remove/reason.\n  - INVALID: \"global_continuity_system_updates\": {\"set\": {\"reality_stability\": 94}}\n  - VALID: \"global_continuity_system_updates\": [{\"set\": {\"reality_stability\": 94}}]\n",
    "messages": [
      {
        "role": "user",
        "content": "# APPEARANCE PROJECTION\nYou are generating a derived appearance summary (and optional art prompt) from canonical appearance atoms/marks.\nReturn ONLY a JSON object. No prose, no commentary, no code fences.\n\nRules:\n- Do NOT change atoms/marks. They are canonical input.\n- Summary must be 2-4 sentences, durable and identity-level (no transient grime, no scene events).\n- Avoid inventory/attire unless the input explicitly marks a signature outfit.\n- Prefer canonical atom terms; do not invent new traits.\n- If you include appearance_art, it must be derived strictly from atoms/marks and signature outfit (if any).\n\nOutput JSON:\n{\n  \"summary\": \"...\",\n  \"appearance_art\": {\n    \"base_prompt\": \"...\",\n    \"current_prompt\": \"...\",\n    \"negative_prompt\": \"...\",\n    \"tags\": [\"...\"]\n  }\n}\n\nInputs:\nCharacter:\n{\n  \"character_id\": \"CHAR_ARTIE\",\n  \"name\": \"Arthur 'Artie' Penhaligon\"\n}\n\nAppearance base (canon):\n{\n  \"alias_map\": {\n    \"eye_color\": [\n      \"hazel\",\n      \"greenish-brown\"\n    ],\n    \"hair_color\": [\n      \"brown\",\n      \"mousy\"\n    ]\n  },\n  \"atoms\": {\n    \"age_band\": \"late-20s\",\n    \"build\": \"slight\",\n    \"eye_color\": \"hazel\",\n    \"hair_color\": \"mousy brown\",\n    \"hair_style\": \"unruly short\",\n    \"height_band\": \"average\",\n    \"sex_presentation\": \"masculine\",\n    \"skin_tone\": \"pale\",\n    \"species\": \"human\"\n  },\n  \"marks\": [\n    {\n      \"durability\": \"durable\",\n      \"location\": \"right knuckle\",\n      \"name\": \"vending machine scar\"\n    }\n  ],\n  \"summary\": \"An average-looking office worker in a rumpled dress shirt, looking perpetually tired until the adrenaline kicks in.\"\n}\n\nAppearance current (canonical atoms/marks):\n{\n  \"alias_map\": {\n    \"eye_color\": [\n      \"hazel\",\n      \"greenish-brown\"\n    ],\n    \"hair_color\": [\n      \"brown\",\n      \"mousy\"\n    ]\n  },\n  \"atoms\": {\n    \"age_band\": \"late-20s\",\n    \"build\": \"slight\",\n    \"eye_color\": \"hazel\",\n    \"hair_color\": \"mousy brown\",\n    \"hair_style\": \"unruly short\",\n    \"height_band\": \"average\",\n    \"sex_presentation\": \"masculine\",\n    \"skin_tone\": \"pale\",\n    \"species\": \"human\"\n  },\n  \"marks\": [\n    {\n      \"durability\": \"durable\",\n      \"location\": \"right knuckle\",\n      \"name\": \"vending machine scar\"\n    },\n    {\n      \"durability\": \"ephemeral\",\n      \"location\": \"torso\",\n      \"name\": \"Neon Yellow Glow\"\n    }\n  ],\n  \"summary\": \"An average-looking office worker in a rumpled dress shirt, looking perpetually tired until the adrenaline kicks in.\"\n}\n\n"
      }
    ]
  }
}